<div class="container-fluid">
<header>
  <img src="../../../assets/sbtebanner.png" width="100%" style="margin-top: 8px; display: flex; justify-content: center;">
</header> 
<div style="display: flex; justify-content: center;margin-top: 5px;"> <img src="../../../assets/sbte.png" height="80" width="80"></div>

<h2  style="display: flex; justify-content: center;color: rgb(51, 22, 116);"> Hello! {{generateData.userName}}</h2>
<div style="display: flex; justify-content: center;">

<form fxLayoutAlign="stretch" fxLayout="column" [formGroup]="form" >
           <!-- <div> -->

            <!-- <mat-form-field appearance="fill"  class="full-width " >
                <mat-label>Email</mat-label>
                <input matInput inputmode="tel" placeholder="Enter a valid email" formControlName="email" #nameInput [readonly]="isEmailVerified">
                <mat-error>Email is required</mat-error>
            </mat-form-field>
            <span *ngIf="!isEmailVerified">
            <button class=" btn btn-primary m-2 p-2" (click)="open(content)" (click)="sendOtpEmail()" [disabled]="!form.controls.email.valid">Send OTP</button>
            <button type="button" (click)="open(content)" (click)="emailOTPTimer()" [disabled]="!form.controls.email.valid || disableMobileOTPButton"  class="btn btn-primary">{{buttonName}}</button>
          </span>
           <span *ngIf="isEmailVerified">
            <i  class="bi bi-check-circle text-primary"> Email Verified</i>
          </span>
           
           </div> 
           <div>
            <mat-form-field appearance="fill"  class="full-width" >
                <mat-label>Mobile Number</mat-label>
                <input matInput inputmode="tel" minlength="10" placeholder="Enter a valid email" formControlName="mobile" #nameInput [readonly]="isMobileNoVerified">
                <mat-error>Mobile is required</mat-error>
                           </mat-form-field>
            <span  *ngIf="!isMobileNoVerified">   
           <button class=" btn btn-primary m-2 p-2" (click)="open2(content2)" (click)="MobileOTPTimer()"  [disabled]="!form.controls.mobile.valid || isEmailVerified && disableMobileOTPButton">{{mobileOTPbuttonName}}</button> 
          </span>
            <mat-error *ngIf="form.get('mobile').hasError('minlength')" class="text-danger">
              Minimum 10 characters is required.
             </mat-error> 
             <span *ngIf="isMobileNoVerified">
              <i  class="bi bi-check-circle text-primary"> Mobile Verified</i>
            </span>
           </div>
           <div>
            <mat-form-field appearance="fill"  class="full-width">
                <mat-label>Password</mat-label>
                <input matInput inputmode="tel" placeholder="Set a Password" formControlName="password" #nameInput>
                <mat-error>Password is required</mat-error>
            </mat-form-field>
          </div>
          <div>
            <mat-form-field appearance="fill"  class="full-width">
                <mat-label>Confirm Password</mat-label>
                <input matInput inputmode="tel" placeholder="Re-Enter your Password" formControlName="confirmPassword" #nameInput>
                <mat-error>This field is required</mat-error>
                
            </mat-form-field>
            <div *ngIf="form.hasError('confirmPasswordValidator','confirmPassword')" class="text-danger"> Password not matched</div> 
            
           </div>
           <div style="display: flex; justify-content: flex-end;">
            <button  class=" btn-group btn btn-primary  m-1" (click)="Registration()"  [disabled]="!form.valid">Register</button>
            <button  class=" btn-group btn btn-danger m-1" >Cancel</button>

           </div>
            -->

            <label for="" class="form-label mt-3">Email</label>
                <div class="mb-3">
                    <div class="input-group">
                        <span class="input-group-text"><mat-icon>mail</mat-icon></span>
                        <input type="text" class="form-control" placeholder="Enter a valid email" formControlName="email" #nameInput [readonly]="isEmailVerified">
                        <span class=" input-group-text"><mat-icon>star</mat-icon></span>
                        <span *ngIf="!isEmailVerified">
                          <button type="button" (click)="open(content)" (click)="emailOTPTimer()" [disabled]="!form.controls.email.valid || disableMobileOTPButton"  class="btn custom-btn  m-2 p-2">{{buttonName}}</button>
                        </span>
                         <span *ngIf="isEmailVerified">
                          <i  class="bi bi-check-circle text-success p-2 m-2"> Email Verified</i>
                        </span>
                  </div>
                  
                   
                  <div *ngIf="form.controls['email'].touched && form.controls['email'].errors?.['required']">
                    <small class=" ms-5 error">Email is required</small>

                  </div>
                </div>
                <label for="" class="form-label mt-3">Mobile </label>
                <div class="mb-3">
                    <div class="input-group">
                        <span class="input-group-text"><mat-icon>phone</mat-icon></span>
                        <input type="number" class="form-control" placeholder="Enter a valid number" formControlName="mobile" #nameInput [readonly]="isMobileNoVerified">
                        <span class=" input-group-text"><mat-icon>star</mat-icon></span>
                        <span  *ngIf="!isMobileNoVerified">   
                          <button class=" btn custom-btn m-2 p-2" (click)="open2(content2)" (click)="MobileOTPTimer()"  [disabled]="!form.controls.mobile.valid || isEmailVerified && disableMobileOTPButton">{{mobileOTPbuttonName}}</button> 
                         </span>
                            
                            <span *ngIf="isMobileNoVerified">
                             <i  class="bi bi-check-circle text-success p-2 m-2"> Mobile Verified</i>
                           </span>
                  </div>
                  <!-- <mat-error *ngIf="form.get('mobile').hasError('minlength')" class="text-danger">
                    Minimum 10 characters is required.
                   </mat-error> -->
                   <div *ngIf="form.controls['mobile'].touched && form.controls['mobile'].errors?.['minlength']">
                    <small class="ms-5 error">Mobile must be at least 10 characters long</small>
                  </div>
                  <div *ngIf="form.controls['mobile'].touched && form.controls['mobile'].errors?.['required']">
                    <small class=" ms-5 error">Mobile is required</small>

                  </div>
                </div>
                <label for="" class="form-label mt-3">Password </label>
                <div class="mb-3">
                    <div class="input-group">
                        <span class="input-group-text"><mat-icon>lock</mat-icon></span>
                        <input type="text" class="form-control p-3" placeholder="Set a Password" formControlName="password" #nameInput>
                        <span class=" input-group-text"><mat-icon>star</mat-icon></span>
                        
                  </div>
                  

                  <div *ngIf="form.controls['password'].touched && form.controls['password'].errors?.['required']">
                    <small class=" ms-5 error">Password is required</small>

                  </div>
                </div>
                <label for="" class="form-label mt-3">Confirm Password </label>
                <div class="mb-3">
                    <div class="input-group">
                        <span class="input-group-text"><mat-icon>lock</mat-icon></span>
                        <input type="text" class="form-control p-3" placeholder="Re-Enter your Password" formControlName="confirmPassword" #nameInput>
                        <span class=" input-group-text"><mat-icon>star</mat-icon></span>
                       
                  </div>
                  
                  <div *ngIf="form.hasError('confirmPasswordValidator','confirmPassword')" class="text-danger"> 
                    <small class=" ms-5 error">Password not matched</small>
                  </div> 

                  <div *ngIf="form.controls['confirmPassword'].touched && form.controls['confirmPassword'].errors?.['required']">
                    <small class=" ms-5 error">Re-Enter to confirm your password</small>

                  </div>
                </div>


               
                <div class="d-grid" >
                  <button  class=" btn custom-btn m-2 p-3" (click)="Registration()"  [disabled]="!form.valid">Register</button>

                </div>

  </form>
  </div>
  <ng-template class="modal" #content let-modal style="background-color: rgba(196, 200, 167, 0.5);">
      
    <div class="modal-header" style="padding: 0px;">
      <mat-toolbar class="btn" style="background: linear-gradient(to right, rgb(16, 24, 82), #797e86); color: white;">
      <h2 class="modal-title" id="modal-basic-title">Enter OTP send to your email</h2>
      <button  type="button" class=" btn btn-close "  aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
    </mat-toolbar>
    </div>
    <div class="modal-body" style="background-color: rgba(48, 102, 169, 0.171);" >
      <mat-card fxFlex="100" >
      
    
        <form fxLayoutAlign="stretch" fxLayout="column" [formGroup]="form2" >
          
          <mat-form-field appearance="standard"  class="full-width">
            <mat-label>Enter OTP</mat-label>
            <input matInput inputmode="tel" placeholder="OTP" formControlName="emailotp">
            <mat-error>OTP is required</mat-error>
        </mat-form-field>
        <div class="text-danger"><i class="bi bi-repeat" class="text-danger"></i> {{buttonText}}</div>
    </form>
  </mat-card>
    </div>
  
    <div class="modal-footer">
      <span *ngIf="resendEmailOTPButton"><button type="button" (click)="emailOTPTimer()" class="btn btn-success">{{buttonName}}</button></span>
      <button (click)="modal.close('Save click')" (click)="emailOtp()" class=" btn-group btn custom-btn">Ok</button>
    </div>
    
  </ng-template>
  <ng-template class="modal" #content2 let-modal style="background-color: rgba(196, 200, 167, 0.5);">
      
    <div class="modal-header" style="padding: 0px;">
      <mat-toolbar class="btn" style="background: linear-gradient(to right, rgb(16, 24, 82), #797e86); color: white;">
      <h2 class="modal-title" id="modal-basic-title">Enter OTP send to your mobile</h2>
      <button  type="button" class=" btn btn-close "  aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
    </mat-toolbar>
    </div>
    <div class="modal-body" style="background-color: rgba(48, 102, 169, 0.171);" >
      <mat-card fxFlex="100" >
      
    
        <form fxLayoutAlign="stretch" fxLayout="column" [formGroup]="form3" >
          
          <mat-form-field appearance="fill"  class="full-width">
            <mat-label>Enter OTP</mat-label>
            <input matInput inputmode="tel" placeholder="OTP" formControlName="mobileotp" #nameInput>
            <mat-error>OTP is required</mat-error>
        </mat-form-field>
        <div class="text-danger"><i class="bi bi-repeat" class="text-danger"></i> {{mobileOTPbuttonText}}</div>
    </form>
  </mat-card>
    </div>
  
    <div class="modal-footer">
      <span *ngIf="resendMobileOTPButton"><button type="button" (click)="MobileOTPTimer()" class="btn btn-success">{{mobileOTPbuttonName}}</button></span>
      <button (click)="modal.close('Save click')" (click)="mobileOtp()" class=" btn-group btn custom-btn">Ok</button>
    </div>
  </ng-template>
  </div>